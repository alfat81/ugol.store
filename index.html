<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–£–≥–æ–ª —á–µ–º–ø–∏–æ–Ω–æ–≤</title>
  <style>
    :root {
      --bg: #000000;
      --surface: #121212;
      --text: #ffffff;
      --gold: #d4af37;
      --gray: #aaa;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      padding-bottom: 40px;
    }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    header {
      background-color: var(--surface);
      padding: 1.5rem 0;
      border-bottom: 1px solid #333;
      text-align: center;
    }
    .logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }
    .logo img {
      height: 50px;
    }
    .logo h1 {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--gold);
      margin: 0;
    }
    .tagline {
      font-size: 0.95rem;
      color: #aaa;
      margin: 0.3rem 0 0;
      font-style: italic;
    }
    .contacts {
      margin-top: 1rem;
      font-size: 0.95rem;
    }
    .contacts a {
      color: var(--text);
      text-decoration: none;
    }
    .contacts a:hover {
      color: var(--gold);
    }
    .filters {
      display: flex;
      gap: 1rem;
      margin: 1.5rem 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    .filters select {
      padding: 0.5rem;
      background: #1e1e1e;
      color: white;
      border: 1px solid #444;
      border-radius: 4px;
      font-size: 1rem;
      min-width: 160px;
    }
    #resetBtn {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background: var(--gold);
      color: #000;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    .product-card {
      background: #1a1a1a;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 1rem;
      transition: transform 0.2s;
    }
    .product-card:hover {
      border-color: var(--gold);
      transform: translateY(-4px);
    }
    .product-img {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background: #1a1a1a;
      margin-bottom: 1rem;
      border-radius: 4px;
    }
    .product-title {
      font-size: 1.1rem;
      margin: 0.5rem 0;
      font-weight: 600;
    }
    .product-meta {
      font-size: 0.9rem;
      color: var(--gray);
      margin: 0.3rem 0;
    }
    .product-price {
      font-weight: bold;
      color: var(--gold);
      font-size: 1.2rem;
      margin: 0.5rem 0;
    }
    .availability {
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }
    .availability.in-stock { color: #4caf50; }
    .availability.out-of-stock { color: #e63946; }
    .availability.coming-soon { color: #ff9800; }
    footer {
      background: var(--surface);
      padding: 2rem 0;
      margin-top: 3rem;
      text-align: center;
      font-size: 0.95rem;
      color: #ccc;
      border-top: 1px solid #333;
    }
  </style>
</head>
<body>

<header class="container">
  <div class="logo">
    <img src="assets/default.png" alt="–£–≥–æ–ª —á–µ–º–ø–∏–æ–Ω–æ–≤" height="50">
    <h1>–£–≥–æ–ª —á–µ–º–ø–∏–æ–Ω–æ–≤</h1>
    <p class="tagline">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –¥–ª—è –±–æ–∫—Å–∞ –∏ –µ–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤</p>
  </div>
  <div class="contacts">
    üìû <a href="tel:+79696002585">+7 (969) 600-25-85</a> |
    ‚úâÔ∏è <a href="mailto:ugol-chemp@yandex.ru">ugol-chemp@yandex.ru</a>
  </div>
</header>

<main class="container">
  <div class="filters">
    <select id="brandFilter">
      <option value="">–í—Å–µ –±—Ä–µ–Ω–¥—ã</option>
      <option value="CLINCH">CLINCH</option>
      <option value="adidas">adidas</option>
    </select>

    <select id="categoryFilter">
      <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
    </select>

    <select id="availabilityFilter">
      <option value="">–õ—é–±–æ–µ –Ω–∞–ª–∏—á–∏–µ</option>
      <option value="–í –Ω–∞–ª–∏—á–∏–∏">–í –Ω–∞–ª–∏—á–∏–∏</option>
      <option value="–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</option>
      <option value="–ü–û–°–¢–£–ü–õ–ï–ù–ò–ï –í –î–ï–ö–ê–ë–†–ï">–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –¥–µ–∫–∞–±—Ä–µ</option>
      <option value="–ü–û–°–¢–£–ü–õ–ï–ù–ò–ï –í –ö–û–ù–¶–ï –î–ï–ö–ê–ë–†–Ø">–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ü–µ –¥–µ–∫–∞–±—Ä—è</option>
      <option value="–í –ù–ê–õ–ò–ß–ò–ò –ù–û–í–û–ï –ü–û–°–¢–£–ü–õ–ï–ù–ò–ï">–ù–æ–≤–æ–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ</option>
    </select>

    <select id="weightFilter">
      <option value="">–í—Å–µ –≤–µ—Å–∞ –ø–µ—Ä—á–∞—Ç–æ–∫</option>
      <option value="10 —É–Ω—Ü–∏–π">10 —É–Ω—Ü–∏–π</option>
      <option value="12 —É–Ω—Ü–∏–π">12 —É–Ω—Ü–∏–π</option>
      <option value="14 —É–Ω—Ü–∏–π">14 —É–Ω—Ü–∏–π</option>
      <option value="16 —É–Ω—Ü–∏–π">16 —É–Ω—Ü–∏–π</option>
      <option value="18 —É–Ω—Ü–∏–π">18 —É–Ω—Ü–∏–π</option>
    </select>

    <select id="helmetSizeFilter">
      <option value="">–í—Å–µ —Ä–∞–∑–º–µ—Ä—ã —à–ª–µ–º–æ–≤</option>
      <option value="S">S</option>
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
      <option value="S/M">S/M</option>
      <option value="L/XL">L/XL</option>
    </select>
  </div>

  <div id="productGrid" class="product-grid">
    –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...
  </div>

  <button id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
</main>

<footer class="container">
  <p>¬© 2025 ¬´–£–≥–æ–ª —á–µ–º–ø–∏–æ–Ω–æ–≤¬ª ‚Äî —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞ –¥–ª—è –±–æ–∫—Å–∞ –∏ –µ–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤</p>
  <p>
    üìû <a href="tel:+79696002585">+7 (969) 600-25-85</a> |
    ‚úâÔ∏è <a href="mailto:ugol-chemp@yandex.ru">ugol-chemp@yandex.ru</a>
  </p>
</footer>

<script>
  // === –ö–ê–¢–ï–ì–û–†–ò–ò –ü–û –û–ü–ò–°–ê–ù–ò–Æ ===
  const CATEGORIES = {
    –ø–µ—Ä—á–∞—Ç–∫–∏: '–ü–µ—Ä—á–∞—Ç–∫–∏',
    —à–ª–µ–º: '–®–ª–µ–º—ã',
    –∑–∞—â–∏—Ç: '–ó–∞—â–∏—Ç–∞',
    –ª–∞–ø—ã: '–õ–∞–ø—ã –∏ –ø–∞–ª–∫–∏',
    –±–∏–Ω—Ç: '–ë–∏–Ω—Ç—ã –∏ —Ç–µ–π–ø—ã',
    –æ–±—É–≤: '–û–±—É–≤—å',
    –∫–∏–º–æ–Ω–æ: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
    —Ñ–æ—Ä–º–∞: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
    —Ç—Ä–∏–∫–æ: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
    –º–∞–π–∫–∞: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
    —à–æ—Ä—Ç—ã: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
    –ø–æ—è—Å: '–ü–æ—è—Å–∞',
    –∫–∞–ø: '–ó–∞—â–∏—Ç–∞',
    –º–µ—à–æ–∫: '–ú–µ—à–∫–∏ –∏ –≥—Ä—É—à–∏',
    –≥—Ä—É—à–∞: '–ú–µ—à–∫–∏ –∏ –≥—Ä—É—à–∏',
    —Å–∫–∞–∫–∞–ª–∫: '–°–∫–∞–∫–∞–ª–∫–∏'
  };

  function getCategory(desc) {
    const d = (desc || '').toLowerCase();
    for (const [key, cat] of Object.entries(CATEGORIES)) {
      if (d.includes(key)) return cat;
    }
    return '–†–∞–∑–Ω–æ–µ';
  }

  let allProducts = [];

  // === –†–ï–ù–î–ï–† –¢–û–í–ê–†–û–í ===
  function renderProducts(list = allProducts) {
    const grid = document.getElementById('productGrid');
    if (list.length === 0) {
      grid.innerHTML = '<p>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
      return;
    }

    const categories = new Set(list.map(p => getCategory(p.description)));
    const catSelect = document.getElementById('categoryFilter');
    catSelect.innerHTML = '<option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>';
    [...categories].sort().forEach(cat => {
      const opt = document.createElement('option');
      opt.value = cat;
      opt.textContent = cat;
      catSelect.appendChild(opt);
    });

    grid.innerHTML = list.map(p => {
      const imgPath = p.sku ? `assets/images/${p.sku}.png` : 'assets/icons/default.svg';
      return `
        <div class="product-card">
          <img src="${imgPath}" alt="${p.name}" class="product-img" onerror="this.src='assets/icons/default.svg'">
          <div class="product-brand">${p.brand || ''}</div>
          <div class="product-title">${p.name}</div>
          <div class="product-meta">${p.description}</div>
          <div class="product-meta">–¶–≤–µ—Ç: ${p.color || '‚Äî'} ‚Ä¢ –†–∞–∑–º–µ—Ä: ${p.size || '‚Äî'}</div>
          <div class="product-price">${(p.price || 0).toLocaleString('ru-RU')} ‚ÇΩ</div>
          <div class="availability ${getAvClass(p.availability)}">${p.availability || '‚Äî'}</div>
        </div>
      `;
    }).join('');
  }

  function getAvClass(av) {
    if (!av) return '';
    if (av.includes('–í –Ω–∞–ª–∏—á–∏–∏')) return 'in-stock';
    if (av.includes('–ü–û–°–¢–£–ü–õ–ï–ù–ò–ï')) return 'coming-soon';
    return 'out-of-stock';
  }

  // === –§–ò–õ–¨–¢–†–ê–¶–ò–Ø ===
  function applyFilters() {
    const brand = document.getElementById('brandFilter').value;
    const category = document.getElementById('categoryFilter').value;
    const availability = document.getElementById('availabilityFilter').value;
    const weight = document.getElementById('weightFilter').value;
    const helmetSize = document.getElementById('helmetSizeFilter').value;

    const filtered = allProducts.filter(p =>
      (brand === '' || (p.brand || '').includes(brand)) &&
      (category === '' || getCategory(p.description) === category) &&
      (availability === '' || (p.availability || '').includes(availability)) &&
      (weight === '' || p.weight === weight) &&
      (helmetSize === '' || p.size_category === helmetSize)
    );

    renderProducts(filtered);
  }

  // === –°–ë–†–û–° –§–ò–õ–¨–¢–†–û–í ===
  function resetFilters() {
    document.getElementById('brandFilter').value = '';
    document.getElementById('categoryFilter').value = '';
    document.getElementById('availabilityFilter').value = '';
    document.getElementById('weightFilter').value = '';
    document.getElementById('helmetSizeFilter').value = '';
    renderProducts(allProducts);
  }

  // === –ó–ê–ì–†–£–ó–ö–ê JSON ===
  fetch('products.json')
    .then(response => {
      if (!response.ok) throw new Error('–§–∞–π–ª products.json –Ω–µ –Ω–∞–π–¥–µ–Ω');
      return response.json();
    })
    .then(products => {
      allProducts = products.map(p => {
        let weight = '';
        let size_category = '';

        const size = (p.size || '').toLowerCase();
        const desc = (p.description || '').toLowerCase();
        const category = getCategory(p.description);

        if (category === '–ü–µ—Ä—á–∞—Ç–∫–∏' && (size.includes('—É–Ω—Ü–∏–π') || size.includes('oz'))) {
          weight = p.size;
        }

        if (category === '–®–ª–µ–º—ã') {
          size_category = p.size;
        }

        return {
          ...p,
          name: p.name || p.description?.split('.')[0] || '–¢–æ–≤–∞—Ä',
          weight,
          size_category
        };
      });

      renderProducts();
    })
    .catch(err => {
      console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', err);
      document.getElementById('productGrid').innerHTML = `
        <p style="color: red;">‚ùå –û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª <code>products.json</code> –ª–µ–∂–∏—Ç –≤ –∫–æ—Ä–Ω–µ.</p>
      `;
    });

  // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('brandFilter').addEventListener('change', applyFilters);
    document.getElementById('categoryFilter').addEventListener('change', applyFilters);
    document.getElementById('availabilityFilter').addEventListener('change', applyFilters);
    document.getElementById('weightFilter').addEventListener('change', applyFilters);
    document.getElementById('helmetSizeFilter').addEventListener('change', applyFilters);
    document.getElementById('resetBtn').onclick = resetFilters;
  });
</script>

</body>
</html>
