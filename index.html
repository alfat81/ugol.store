<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>–£–ì–û–õ –ß–ï–ú–ü–ò–û–ù–û–í</title>
  <style>
    :root {
      --bg: #000000;
      --surface: #121212;
      --text: #ffffff;
      --gold: #d4af37;
      --gray: #aaa;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      padding-bottom: 40px;
    }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
      position: relative;
      background: rgba(0, 0, 0, 0.75);
      border-radius: 12px;
      margin-top: 2rem;
      margin-bottom: 2rem;
    }

    /* –ü–ê–†–ê–õ–õ–ê–ö–°-–§–û–ù */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('assets/default.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      z-index: -1;
    }

    /* –®–ê–ü–ö–ê */
    .header-content {
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
      padding: 1.5rem 1rem 0;
    }
    .header-content h1 {
      font-size: 2.2rem;
      font-weight: bold;
      color: var(--gold);
      margin: 0;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }
    .tagline {
      font-size: 1.1rem;
      color: #ddd;
      margin: 0.5rem 0 1rem;
      font-style: italic;
    }
    .contacts {
      font-size: 1rem;
      margin-top: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      align-items: center;
    }
    .contacts a {
      color: white;
      text-decoration: none;
    }
    .contacts a:hover {
      color: var(--gold);
    }
    .telegram-link {
      color: var(--gold);
      text-decoration: underline;
      margin-left: 0;
    }

    /* –§–ò–õ–¨–¢–†–´ */
    .filters {
      display: flex;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    @media (max-width: 768px) {
      .filters {
        margin-top: 2.5rem;
      }
    }
    .filters select {
      padding: 0.5rem;
      background: #1e1e1e;
      color: white;
      border: 1px solid #444;
      border-radius: 4px;
      font-size: 1rem;
      min-width: 140px;
    }

    /* –¢–û–í–ê–†–´ */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    .product-card {
      background: #1a1a1a;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 1rem;
      transition: transform 0.2s;
      position: relative;
    }
    .product-card.active {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
      z-index: 10;
    }
    .product-card:hover {
      border-color: var(--gold);
      transform: translateY(-4px);
    }
    .product-img {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background: #1a1a1a;
      margin-bottom: 1rem;
      border-radius: 4px;
    }
    .product-title {
      font-size: 1.1rem;
      margin: 0.5rem 0;
      font-weight: 600;
    }
    .product-meta {
      font-size: 0.9rem;
      color: var(--gray);
      margin: 0.3rem 0;
    }
    .product-price {
      margin: 0.5rem 0;
    }
    .old-price {
      text-decoration: line-through;
      color: #aaa;
      font-size: 1rem;
    }
    .new-price {
      color: var(--gold);
      font-weight: bold;
      font-size: 1.2rem;
    }
    .contact-buttons {
      display: none;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #333;
    }
    .contact-buttons.show {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }
    .contact-buttons a {
      display: inline-block;
      padding: 0.4rem 0.8rem;
      background: var(--gold);
      color: #000;
      text-decoration: none;
      border-radius: 4px;
      font-weight: bold;
      font-size: 0.9rem;
    }
    .contact-buttons a:hover {
      opacity: 0.9;
    }
    .availability {
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }
    .availability.in-stock { color: #4caf50; }
    .availability.out-of-stock { color: #e63946; }
    .availability.coming-soon { color: #ff9800; }

    /* –ü–û–î–í–ê–õ */
    footer {
      background: var(--surface);
      padding: 2rem 0;
      margin-top: 3rem;
      text-align: center;
      font-size: 0.95rem;
      color: #ccc;
      border-top: 1px solid #333;
    }
  </style>
</head>
<body>

  <main class="container">
    <div class="header-content">
      <h1>–£–ì–û–õ –ß–ï–ú–ü–ò–û–ù–û–í</h1>
      <p class="tagline">–ú–∞–≥–∞–∑–∏–Ω —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –¥–ª—è –±–æ–∫—Å–∞ –∏ –µ–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤</p>
      <div class="contacts">
        üìû 
        <a href="tel:+79696002585">+7 (969) 600-25-85</a>
        <a href="https://t.me/ugol_chemp" class="telegram-link">‚úâÔ∏è –≤ Telegram</a>
        <br>
        ü§ñ 
        <a href="https://t.me/ugol_chemp_bot" class="telegram-link">@ugol_chemp_bot</a>
        <br>
        ‚úâÔ∏è 
        <a href="mailto:ugol-chemp@yandex.ru">ugol-chemp@yandex.ru</a>
      </div>
    </div>

    <div class="filters">
      <select id="categoryFilter">
        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
      </select>
      <select id="brandFilter">
        <option value="">–í—Å–µ –±—Ä–µ–Ω–¥—ã</option>
        <option value="CLINCH">CLINCH</option>
        <option value="adidas">adidas</option>
      </select>
      <select id="sizeOrWeightFilter">
        <option value="">–í—Å–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –≤–µ—Å–∞</option>
      </select>
      <select id="availabilityFilter">
        <option value="">–õ—é–±–æ–µ –Ω–∞–ª–∏—á–∏–µ</option>
        <option value="–í –Ω–∞–ª–∏—á–∏–∏">–í –Ω–∞–ª–∏—á–∏–∏</option>
        <option value="–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</option>
        <option value="–ü–û–°–¢–£–ü–õ–ï–ù–ò–ï –í –î–ï–ö–ê–ë–†–ï">–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –¥–µ–∫–∞–±—Ä–µ</option>
        <option value="–ü–û–°–¢–£–ü–õ–ï–ù–ò–ï –í –ö–û–ù–¶–ï –î–ï–ö–ê–ë–†–Ø">–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ü–µ –¥–µ–∫–∞–±—Ä—è</option>
        <option value="–í –ù–ê–õ–ò–ß–ò–ò –ù–û–í–û–ï –ü–û–°–¢–£–ü–õ–ï–ù–ò–ï">–ù–æ–≤–æ–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ</option>
      </select>
    </div>

    <div id="productGrid" class="product-grid">
      –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...
    </div>

    <button id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
  </main>

  <footer class="container">
    <p>¬© 2025 ¬´–£–≥–æ–ª —á–µ–º–ø–∏–æ–Ω–æ–≤¬ª ‚Äî —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞ –¥–ª—è –±–æ–∫—Å–∞ –∏ –µ–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤</p>
    <p>
      üìû <a href="tel:+79696002585">+7 (969) 600-25-85</a> |
      ü§ñ <a href="https://t.me/ugol_chemp_bot">@ugol_chemp_bot</a> |
      ‚úâÔ∏è <a href="mailto:ugol-chemp@yandex.ru">ugol-chemp@yandex.ru</a>
    </p>
  </footer>

  <script>
    // === –ö–ê–¢–ï–ì–û–†–ò–ò ===
    const CATEGORIES = {
      –ø–µ—Ä—á–∞—Ç–∫–∏: '–ü–µ—Ä—á–∞—Ç–∫–∏',
      —à–ª–µ–º: '–®–ª–µ–º—ã',
      –∑–∞—â–∏—Ç: '–ó–∞—â–∏—Ç–∞',
      –ª–∞–ø—ã: '–õ–∞–ø—ã –∏ –ø–∞–ª–∫–∏',
      –±–∏–Ω—Ç: '–ë–∏–Ω—Ç—ã –∏ —Ç–µ–π–ø—ã',
      –æ–±—É–≤: '–û–±—É–≤—å',
      –∫–∏–º–æ–Ω–æ: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
      —Ñ–æ—Ä–º–∞: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
      —Ç—Ä–∏–∫–æ: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
      –º–∞–π–∫–∞: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
      —à–æ—Ä—Ç—ã: '–ö–∏–º–æ–Ω–æ –∏ –æ–¥–µ–∂–¥–∞',
      –ø–æ—è—Å: '–ü–æ—è—Å–∞',
      –∫–∞–ø: '–ó–∞—â–∏—Ç–∞',
      –º–µ—à–æ–∫: '–ú–µ—à–∫–∏ –∏ –≥—Ä—É—à–∏',
      –≥—Ä—É—à–∞: '–ú–µ—à–∫–∏ –∏ –≥—Ä—É—à–∏',
      —Å–∫–∞–∫–∞–ª–∫: '–°–∫–∞–∫–∞–ª–∫–∏'
    };

    function getCategory(desc) {
      const d = (desc || '').toLowerCase();
      for (const [key, cat] of Object.entries(CATEGORIES)) {
        if (d.includes(key)) return cat;
      }
      return '–†–∞–∑–Ω–æ–µ';
    }

    let allProducts = [];

    // === –†–ï–ù–î–ï–† –¢–û–í–ê–†–û–í ===
    function renderProducts(list = allProducts) {
      const grid = document.getElementById('productGrid');
      if (list.length === 0) {
        grid.innerHTML = '<p>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
        return;
      }

      const categories = new Set();
      const brands = new Set();
      const sizes = new Set();
      const weights = new Set();

      list.forEach(p => {
        const cat = getCategory(p.description);
        categories.add(cat);
        brands.add(p.brand || '');
        if (cat === '–ü–µ—Ä—á–∞—Ç–∫–∏') {
          if (p.weight) weights.add(p.weight);
        } else {
          if (p.size_category) sizes.add(p.size_category);
        }
      });

      // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
      const catSelect = document.getElementById('categoryFilter');
      catSelect.innerHTML = '<option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>';
      [...categories].sort().forEach(cat => {
        if (cat && cat !== '–†–∞–∑–Ω–æ–µ') {
          const opt = document.createElement('option');
          opt.value = cat;
          opt.textContent = cat;
          catSelect.appendChild(opt);
        }
      });

      // –ë—Ä–µ–Ω–¥—ã
      const brandSelect = document.getElementById('brandFilter');
      const brandOpts = [...brands].filter(b => b).sort();
      brandOpts.forEach(brand => {
        const opt = document.createElement('option');
        opt.value = brand;
        opt.textContent = brand;
        brandSelect.appendChild(opt);
      });

      // –†–∞–∑–º–µ—Ä/–í–µ—Å ‚Äî –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

      grid.innerHTML = list.map(p => {
        const imgPath = p.sku ? `assets/images/${p.sku}.png` : 'assets/icons/default.svg';
        const sizeDisplay = p.weight || p.size_category || p.size || '‚Äî';
        return `
          <div class="product-card" data-sku="${p.sku || ''}" data-url="https://ugol.store#${p.sku}">
            <img src="${imgPath}" alt="${p.name}" class="product-img" onerror="this.src='assets/icons/default.svg'">
            <div class="product-title">${p.name}</div>
            <div class="product-meta">${p.description}</div>
            <div class="product-meta">–¶–≤–µ—Ç: ${p.color || '‚Äî'} ‚Ä¢ –†–∞–∑–º–µ—Ä: ${sizeDisplay}</div>
            <div class="product-price">
              ${p.oldPrice ? `
                <span class="old-price">${p.oldPrice.toLocaleString('ru-RU')} ‚ÇΩ</span><br>
                <span class="new-price">${p.price.toLocaleString('ru-RU')} ‚ÇΩ</span>
              ` : `
                <span class="new-price">${p.price.toLocaleString('ru-RU')} ‚ÇΩ</span>
              `}
            </div>
            <div class="availability ${getAvClass(p.availability)}">${p.availability || '‚Äî'}</div>
            <div class="contact-buttons">
              <a href="tel:+79696002585">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</a>
              <a href="https://t.me/ugol_chemp_bot">‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å</a>
            </div>
          </div>
        `;
      }).join('');
    }

    function getAvClass(av) {
      if (!av) return '';
      if (av.includes('–í –Ω–∞–ª–∏—á–∏–∏')) return 'in-stock';
      if (av.includes('–ü–û–°–¢–£–ü–õ–ï–ù–ò–ï')) return 'coming-soon';
      return 'out-of-stock';
    }

    // === –û–ë–ù–û–í–õ–ï–ù–ò–ï –§–ò–õ–¨–¢–†–ê –†–ê–ó–ú–ï–†/–í–ï–° ===
    function updateSizeOrWeightFilter() {
      const category = document.getElementById('categoryFilter').value;
      const sizeOrWeightSelect = document.getElementById('sizeOrWeightFilter');
      sizeOrWeightSelect.innerHTML = '<option value="">–í—Å–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –≤–µ—Å–∞</option>';

      const values = new Set();
      allProducts.forEach(p => {
        const cat = getCategory(p.description);
        if (category === '' || cat === category) {
          if (cat === '–ü–µ—Ä—á–∞—Ç–∫–∏') {
            if (p.weight) values.add(p.weight);
          } else {
            if (p.size_category) values.add(p.size_category);
          }
        }
      });

      [...values].sort().forEach(val => {
        const opt = document.createElement('option');
        opt.value = val;
        opt.textContent = val;
        sizeOrWeightSelect.appendChild(opt);
      });
    }

    // === –§–ò–õ–¨–¢–†–ê–¶–ò–Ø ===
    function applyFilters() {
      const category = document.getElementById('categoryFilter').value;
      const brand = document.getElementById('brandFilter').value;
      const sizeOrWeight = document.getElementById('sizeOrWeightFilter').value;
      const availability = document.getElementById('availabilityFilter').value;

      const filtered = allProducts.filter(p => {
        const cat = getCategory(p.description);
        const matchesCategory = category === '' || cat === category;
        const matchesBrand = brand === '' || (p.brand || '').includes(brand);
        const matchesAvailability = availability === '' || (p.availability || '').includes(availability);

        let matchesSizeOrWeight = true;
        if (sizeOrWeight !== '') {
          if (cat === '–ü–µ—Ä—á–∞—Ç–∫–∏') {
            matchesSizeOrWeight = p.weight === sizeOrWeight;
          } else {
            matchesSizeOrWeight = p.size_category === sizeOrWeight;
          }
        }

        return matchesCategory && matchesBrand && matchesAvailability && matchesSizeOrWeight;
      });

      renderProducts(filtered);
    }

    // === –°–ë–†–û–° ===
    function resetFilters() {
      document.getElementById('categoryFilter').value = '';
      document.getElementById('brandFilter').value = '';
      document.getElementById('sizeOrWeightFilter').value = '';
      document.getElementById('availabilityFilter').value = '';
      renderProducts(allProducts);
    }

    // === –ó–ê–ì–†–£–ó–ö–ê –ö–ê–¢–ê–õ–û–ì–ê ===
    fetch('products.json')
      .then(response => {
        if (!response.ok) throw new Error('404: products.json –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return response.json();
      })
      .then(products => {
        allProducts = products.filter(p => !p.hidden);
        renderProducts();
        updateSizeOrWeightFilter();
        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –∫–∞—Ä—Ç–æ—á–∫–µ –∏–∑ URL
        setTimeout(() => {
          const hash = window.location.hash.substring(1);
          if (hash) {
            const card = document.querySelector(`.product-card[data-sku="${hash}"]`);
            if (card) {
              card.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
          }
        }, 300);
      })
      .catch(err => {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', err);
        document.getElementById('productGrid').innerHTML = `
          <p style="color: red; text-align: center;">
            ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥.<br>
            –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª <code>products.json</code> –ª–µ–∂–∏—Ç –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞.
          </p>
        `;
      });

    // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('categoryFilter').addEventListener('change', () => {
        updateSizeOrWeightFilter();
        applyFilters();
      });
      document.getElementById('brandFilter').addEventListener('change', applyFilters);
      document.getElementById('sizeOrWeightFilter').addEventListener('change', applyFilters);
      document.getElementById('availabilityFilter').addEventListener('change', applyFilters);
      document.getElementById('resetBtn').onclick = resetFilters;

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º
      document.addEventListener('click', function(e) {
        const card = e.target.closest('.product-card');
        if (!card) return;
        document.querySelectorAll('.product-card').forEach(c => {
          c.classList.remove('active');
          c.querySelector('.contact-buttons')?.classList.remove('show');
        });
        card.classList.add('active');
        const buttons = card.querySelector('.contact-buttons');
        if (buttons) buttons.classList.add('show');
      });
    });
  </script>

</body>
</html>
